<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/rss2.xml" title="Leon Blogs" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Leon Blogs">
<meta property="og:url" content="http://leonmak.me/page/3/index.html">
<meta property="og:site_name" content="Leon Blogs">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Leon Blogs">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'post',
    motion: true
  };
</script>

  <title> Leon Blogs </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-87678896-1', 'auto');
  ga('send', 'pageview');
</script>





  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Leon Blogs</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-projects">
          <a href="/projects" rel="section">
            
              <i class="menu-item-icon fa fa-gift fa-fw"></i> <br />
            
            projects
          </a>
        </li>
      
        
        <li class="menu-item menu-item-design">
          <a href="/design" rel="section">
            
              <i class="menu-item-icon fa fa-paint-brush fa-fw"></i> <br />
            
            design
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <section id="posts" class="posts-expand">

    

    
    
      
      

      
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/07/Manual-Moderation-tweet-storage/" itemprop="url">
                  Manual Moderation - tweet storage
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-06-07T09:40:02+08:00" content="2016-06-07">
              2016-06-07
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/06/07/Manual-Moderation-tweet-storage/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/07/Manual-Moderation-tweet-storage/" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>Loklak walls are going to get a new feature called manual moderation! You may have seen it in the coming soon section of the content tab when you were creating a wall.</p>
<p>For the walls application we have decided to use Mongodb so we can query an external API like loklak_server, then store tweets in the Mongodb database. So the first question we have to think about before storing it is how to model it in our Mongoose schemas. To answer that we have to consider the access patterns of our web app, as it is critical in deciding how we model the collection in mongodb - whether we should embed the data in an existing collection, keep all tweets for a wall in an array in one document in the collection, or store each tweet as a a document itself and query them.</p>
<p>The main issue is that the number of tweets could keep growing, so we can’t embed nor store them in an array in a document. Mongodb has a document size limit of 16MB (for the unfamilar, a document is to a row as collection is to a table), so we could very realistically hit that if we stored all tweets in an array.</p>
<p>Another issue is the frequency of access, and updates of the tweet data. If we embedded the data, we could hit the size limit and it would not make sense to keep retrieving extra information that would not be needed if we only wanted the tweets array. Also to update individual tweets we would have to save the whole array, for just one tweet!</p>
<p>Thus in our case I have chosen the last option, and created a separate mongodb collection to store the tweets individually as I have modeled them as a one to many, (1 walls - many tweets) relationship. Although it could also be seen as a many to many relationship between walls and tweets, to control the approval status for each requires us to treat each tweet as separate from each other as one could be approved but another rejected. So in the schema I have userWallId used for querying all tweets belonging to a certain wall of a certain user, notice the index:true option which helps speed up the query by indexing the userWallId field.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> TweetSchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line"> userWallId: &#123; type: <span class="built_in">String</span>, required: <span class="literal">true</span>, index: <span class="literal">true</span> &#125;,</span><br><span class="line"> approval: <span class="built_in">Boolean</span>,</span><br><span class="line"> timestamp: <span class="built_in">String</span>,</span><br><span class="line"> created_at: <span class="built_in">String</span>,</span><br><span class="line">,...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>In contrast I have chosen to embed the wall options themselves into the user’s own collection, as this is a “one-few” relation, and we can denormalize it by embedding the wall options within an array in the user object. Denormalizing as such in Mongodb allows us to query it faster as we do not have to perform another lookup for the wall options if it were in another collection.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> UserSchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line"> name: &#123; type: <span class="built_in">String</span>, required: <span class="literal">true</span> &#125;,</span><br><span class="line"> local: &#123;..&#125;,</span><br><span class="line"> isVerified: &#123; type: <span class="built_in">Boolean</span>, required: <span class="literal">true</span> &#125;,</span><br><span class="line"> twitter: &#123;..&#125;,</span><br><span class="line"> apps: &#123;</span><br><span class="line">   wall: [&#123;</span><br><span class="line">      profanity: <span class="built_in">Boolean</span>,</span><br><span class="line">      images: <span class="built_in">Boolean</span>,</span><br><span class="line">       <span class="comment">//...other wall options</span></span><br><span class="line">   &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>To store the tweets we will then have to create a route to handle post requests:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">router.post (<span class="string">'/tweets/:userId/:wallId'</span>, auth,  <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"> req.body.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">tweet</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> newTweet = <span class="keyword">new</span> Tweet(tweet);</span><br><span class="line">   newTweet.save(<span class="function"><span class="keyword">function</span>(<span class="params">err,result</span>)</span>&#123;</span><br><span class="line">   ...</span><br><span class="line">  &#125;);</span><br><span class="line"> &#125;)</span><br><span class="line"> res.jsonp(&#123;message: &amp;quot;inserted &amp;quot;+ req.body.length&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>And in the front end angular app we can use these routes to store our new tweets with $http.post:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> posturl= <span class="string">'/api/tweets/'</span>+ $rootScope.root.currentUser._id + <span class="string">'/'</span> + $scope.userWalls[$scope.userWalls.length - <span class="number">1</span>].id;</span><br><span class="line"></span><br><span class="line">SearchService.initData(searchParams).then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// get tweets array from loklak_server and set all tweets to default false for approval status</span></span><br><span class="line"></span><br><span class="line">data.statuses.map(<span class="function"><span class="keyword">function</span>(<span class="params">tweet</span>)</span>&#123;</span><br><span class="line"> tweet.userWallId = userWallId;</span><br><span class="line"> tweet.approval = <span class="literal">false</span>; </span><br><span class="line"> &#125;)</span><br><span class="line"></span><br><span class="line">$http.post(posturl, data.statuses)</span><br></pre></td></tr></table></figure>
<p>The end result is that we can do a get request at the moderation tab page for that wall’s tweets and display it as such:</p>
<p><img class="alignnone size-full wp-image-2129" src="http://blog.loklak.net/wp-content/uploads/2016/06/screenshot-2016-06-18-07-02-04.png" alt="Screenshot 2016-06-18 07.02.04.png" width="720" height="402"></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/06/Authentication-with-JWT/" itemprop="url">
                  Authentication with JWT
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-06-06T09:28:23+08:00" content="2016-06-06">
              2016-06-06
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/06/06/Authentication-with-JWT/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/06/Authentication-with-JWT/" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>In the loklak webclient, the plan is to store the accounts locally on mongodb, instead of using loklak server to store accounts. Here’s how I used <a href="http://jwt.io" target="_blank" rel="external">JWTs</a> (JSON Web Tokens) for basic user authentication.</p>
<p>Token based authentication is often compared to the traditional method of saving a session id in a cookie, and checking the user information in the session object for every request. Instead of saving user information on the server and checking it every request, a token, which allows access to the server, is given in exchange for valid credentials and is sent in every request. There are various advantages to this, including <a href="https://jwt.io/introduction/" target="_blank" rel="external">security and scaling</a>.</p>
<p>As you can see from the mongoose user schema the hash and salt are stored instead of a password.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> UserSchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line"> email: &#123;</span><br><span class="line">	 type: <span class="built_in">String</span>,</span><br><span class="line">	 unique: <span class="literal">true</span>,</span><br><span class="line">	 required: <span class="literal">true</span></span><br><span class="line"> &#125;,</span><br><span class="line"> name: &#123;</span><br><span class="line">	 type: <span class="built_in">String</span>,</span><br><span class="line">	 required: <span class="literal">true</span></span><br><span class="line"> &#125;,</span><br><span class="line"> hash: <span class="built_in">String</span>,</span><br><span class="line"> salt: <span class="built_in">String</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><a href="http://passportjs.org/" target="_blank" rel="external">PassportJS</a> is a popular middleware for handling authentication in Node.js, and since the web client already uses Express, this was a natural choice. Various authentication ‘strategies’ will also be used to connect other social login providers, like twitter, or weibo.</p>
<p>For now, since we are using email to store the username and hashed password, we will choose the <a href="https://www.npmjs.com/package/passport-local" target="_blank" rel="external">passport-local</a> package. The configuration is easy can be found on their <a href="http://passportjs.org/docs/configure" target="_blank" rel="external">website</a>, and is almost the same, except that we use email as username, rather than just any string.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">passport.use(<span class="keyword">new</span> LocalStrategy(&#123;</span><br><span class="line"> usernameField: <span class="string">'email'</span></span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="function"><span class="keyword">function</span>(<span class="params">username, password, done</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ... same as example config in passportjs.org</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Express.js then handles the register routes:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">router.post(<span class="string">'/register'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line"> passport.authenticate(<span class="string">'local'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, user, info</span>)</span>&#123;</span><br><span class="line"> <span class="keyword">var</span> token;</span><br><span class="line"> <span class="comment">// If Passport throws/catches an error</span></span><br><span class="line"> <span class="keyword">if</span> (err) &#123;</span><br><span class="line">   res.status(<span class="number">404</span>).json(err);</span><br><span class="line">   <span class="keyword">return</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">// If a user is found, log in, ie. return a token</span></span><br><span class="line">   <span class="keyword">if</span>(user)&#123;</span><br><span class="line">     token = user.generateJwt();</span><br><span class="line">     res.status(<span class="number">200</span>);</span><br><span class="line">     res.json(&#123;</span><br><span class="line">        token : token</span><br><span class="line">     &#125;);</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="comment">// If user is not found, register the user, then return a token</span></span><br><span class="line">   <span class="keyword">var</span> user = <span class="keyword">new</span> User();</span><br><span class="line">   user.name = req.body.email;</span><br><span class="line">   user.email = req.body.email;</span><br><span class="line">   user.setPassword(req.body.password);</span><br><span class="line">   user.save(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">var</span> token;</span><br><span class="line">     token = user.generateJwt();</span><br><span class="line">     res.status(<span class="number">200</span>);</span><br><span class="line">     res.json(&#123;</span><br><span class="line">        token : token</span><br><span class="line">     &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>So that’s it for the server side code, and similar logic can be applied to the login route. Now we move on to AngularJS, where we use a service to access the above route. As you can see below the JWT is stored in local storage when the user logs in.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AuthenticationService</span>(<span class="params">$http, $window</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> saveToken = <span class="function"><span class="keyword">function</span> (<span class="params">token</span>) </span>&#123;</span><br><span class="line">   $<span class="built_in">window</span>.localStorage[<span class="string">'jwt-token'</span>] = token;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> getToken = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> $<span class="built_in">window</span>.localStorage[<span class="string">'jwt-token'</span>];</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> isLoggedIn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> token = getToken();</span><br><span class="line">   <span class="keyword">var</span> payload;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(token)&#123;</span><br><span class="line">   payload = token.split(<span class="string">'.'</span>)[<span class="number">1</span>];</span><br><span class="line">   payload = $<span class="built_in">window</span>.atob(payload); <span class="comment">// .atob decodes the base64 String</span></span><br><span class="line">   payload = <span class="built_in">JSON</span>.parse(payload);</span><br><span class="line">   <span class="keyword">return</span> payload.exp &lt; <span class="built_in">Date</span>.now() / <span class="number">1000</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> currentUser = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(isLoggedIn())&#123;</span><br><span class="line">   <span class="keyword">var</span> token = getToken();</span><br><span class="line">   <span class="keyword">var</span> payload = token.split(<span class="string">'.'</span>)[<span class="number">1</span>];</span><br><span class="line">   payload = $<span class="built_in">window</span>.atob(payload); </span><br><span class="line">   payload = <span class="built_in">JSON</span>.parse(payload);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">     email : payload.email,</span><br><span class="line">     name : payload.name</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> register = <span class="function"><span class="keyword">function</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> $http.post(<span class="string">'/api/register'</span>, user).success(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  saveToken(data.token);</span><br><span class="line">  &#125;);</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
<p>The last step is to use these services, which in turn uses our routes, in our controllers:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$rootScope.root.onSubmit = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	AuthService</span><br><span class="line">	.register($rootScope.root.credentials)</span><br><span class="line">	.error(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">		alert(err);</span><br><span class="line">	&#125;)</span><br><span class="line">	.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		$location.path(<span class="string">'/'</span>);</span><br><span class="line">		$rootScope.root.isLoggedIn = AuthService.isLoggedIn();</span><br><span class="line">		$rootScope.root.currentUser = AuthService.currentUser();</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">$rootScope.root.onLogout = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	AuthService.logout();</span><br><span class="line">	$location.path(<span class="string">'/'</span>);</span><br><span class="line">	$rootScope.root.isLoggedIn = AuthService.isLoggedIn();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>And here’s what the form looks like:</p>
<p><img class="alignnone size-full wp-image-805" src="http://blog.loklak.net/wp-content/uploads/2016/06/3em8ytqdyc.gif" alt="3eM8YtQdYC" width="888" height="649"></p>
<p>As you can see, there is still more work to be done to connect this with the rest of the app, but hopefully those reading can better understand how to implement local auth using JWTs on their SPA.</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/22/A-tweet-feed-for-loklak-org/" itemprop="url">
                  A tweet feed for loklak.org 
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-05-22T09:20:21+08:00" content="2016-05-22">
              2016-05-22
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/05/22/A-tweet-feed-for-loklak-org/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/05/22/A-tweet-feed-for-loklak-org/" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>Loklak.org has a page for <a href="http://loklak.org/apps/applist/index.html" target="_blank" rel="external">front-end apps</a> that showcase the uses of loklak’s API, and in the first week I’ve tried to warm up for GSOC by making a ‘realtime’ twitter feed, as the existing front-end apps were mainly single http get requests and didn’t seem very appealing to me, and also to prepare for my <a href="http://leonmak.me/2016/05/21/Google-Summer-of-Code-Loklak/" target="_blank" rel="external">front-end app data visualisations GSOC project</a>.</p>
<p>To obtain updated data, the app polls the loklak API on a regular interval. This is done rather simply by using $interval in AngularJS, which is just a wrapper around window.setInterval(). For the realtime feed, I set the minimum rate for querying at an arbitrary 1min so as not to exceed the limits.</p>
<p>The next thing I needed to solve was where to store the data, as I didn’t have a database to work with, local storage was the only option. A useful module for this is “<a href="https://github.com/gsklee/ngStorage" target="_blank" rel="external">ngStorage</a>“. At a maximum of 5MB it isn’t much, but decent enough to store a few thousand tweets and showcase the features of loklak. If developers wanted to create an external app for loklak, they could also use the front-end apps if they were well modularized.</p>
<p>Lastly, to display in a fancy pinterest-like grid, I’ve decided to use an angular module called “<a href="https://github.com/s-yadav/angulargrid" target="_blank" rel="external">angulargrid</a>“. To achieve the infinite scroll effect, I created another scope variable, to take a subset of the data in local storage. AngularJS then helps with rendering changes in the data model to the feed, by using $watch() on local storage.</p>
<p>Do checkout the <a href="http://loklak.org/apps/tweetfeed/" target="_blank" rel="external">tweetfeed</a>:</p>
<p><img class="alignnone size-full wp-image-137" src="http://blog.loklak.net/wp-content/uploads/2016/05/tweetfeed.gif" alt="tweetfeed" width="1437" height="804"></p>
<p>Some areas to improve:</p>
<ul>
    <li>Refactor services to make it more modular</li>
    <li>Improve the regex to account for emojis and other tags</li>
</ul>


            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/21/Google-Summer-of-Code-Loklak/" itemprop="url">
                  Google Summer of Code: Loklak
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-05-21T08:49:17+08:00" content="2016-05-21">
              2016-05-21
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/05/21/Google-Summer-of-Code-Loklak/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/05/21/Google-Summer-of-Code-Loklak/" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><p>Currently, <a href="http://loklak.net">Loklak.net</a> has it’s own search and social wall capabilities. </p>
<!-- ![alt text](https://loklaknet.files.wordpress.com/2015/08/screenshot-4.png "linear layout") -->
<p><img src="https://loklaknet.files.wordpress.com/2015/08/screenshot-7.png" alt="alt text" title="card layout"><br><img src="https://loklaknet.files.wordpress.com/2015/08/screenshot-8.png" alt="alt text" title="leaderboards"></p>
<p><a href="http://loklak.org/apps/">Loklak.org</a> also has a few front-end apps:<br><img src="http://s32.postimg.org/b435dxmo5/Screenshot_2016_05_21_10_31_57.png" alt="" title="loklak front-end apps"><br>However, they are currently not as feature filled as <a href="http://loklak.net">Loklak.net</a>, so the project aims to add additional visualisations and display options, including a live-streaming tweet wall, and timeline for loklak.org</p>
<h1 id="The-project"><a href="#The-project" class="headerlink" title="The project"></a>The project</h1><p>A front-end app that uses loklak.org for API calls to obtain tweets in json format. Users can deploy their own loklak server or locally or online (checkout the <a href="http://github.com/loklak/loklak_server">loklak_server github repo</a> for one-click deploy buttons!)<br><a href="https://heroku.com/deploy"><img src="https://www.herokucdn.com/deploy/button.svg" alt="Deploy"></a><br><a href="https://my.scalingo.com/deploy?source=https://github.com/loklak/loklak_server"><img src="https://cdn.scalingo.com/deploy/button.svg" alt="Deploy on Scalingo"></a><br><a href="https://bluemix.net/deploy?repository=https://github.com/loklak/loklak_server"><img src="https://bluemix.net/deploy/button.png" alt="Deploy to Bluemix"></a></p>
<p>I have previously developed a prototype with meteor.js <a href="https://github.com/leonmak/meteor-twitterwall">(github repo)</a> which you can deploy locally or online too!<br><img src="https://raw.githubusercontent.com/leonmak/meteor-twitterwall/master/public/ss.gif" alt=""></p>
<p>But upon discussion with the loklak team we concluded it was hard to integrate with loklak.org like the current front-end apps, so I decided to make the front-end app with a front-end framework like Angular or React.</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/05/21/Google-Summer-of-Code-Loklak/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/21/updates/" itemprop="url">
                  updates
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2016-05-21T08:38:28+08:00" content="2016-05-21">
              2016-05-21
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/05/21/updates/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/05/21/updates/" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="Profile-pic"><a href="#Profile-pic" class="headerlink" title="Profile pic"></a>Profile pic</h1><p>Some additions to the next theme<br>In <code>_config.yml</code>, add <code>avatar: /images/default_avatar.jpeg</code></p>
<h1 id="Tags-page"><a href="#Tags-page" class="headerlink" title="Tags page"></a>Tags page</h1><ul>
<li><p>Create a page named <code>tags</code></p>
<pre><code>hexo new page &quot;tags&quot;

</code></pre></li>
<li><p>Edit tags page, set page type to <code>tags</code>.</p>
<pre><code>title: All tags
date: 2014-12-22 12:39:04
type: &quot;tags&quot;

</code></pre></li>
<li><p>Add <code>tags</code> to theme <code>_config.yml</code>:</p>
<pre><code>menu:
  home: /
  archives: /archives
  tags: /tags

</code></pre></li>
</ul>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/22/starting-a-free-blog/" itemprop="url">
                  Meta! How to create this blog (for free ;)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2015-12-22T00:26:06+08:00" content="2015-12-22">
              2015-12-22
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/12/22/starting-a-free-blog/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/12/22/starting-a-free-blog/" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="Why-Hexo"><a href="#Why-Hexo" class="headerlink" title="Why Hexo?"></a>Why Hexo?</h1><p>It’s a static site generator. It’s fast, free, and simple. AND you post in markdown, which is just neat.</p>
<h1 id="Creating-your-hexo-blog-101"><a href="#Creating-your-hexo-blog-101" class="headerlink" title="Creating your hexo blog 101"></a>Creating your hexo blog 101</h1><p>It’s fun &amp; free (except for domain name, if you’re not a uni student).<br>First let’s setup hexo. Install npm if you haven’t.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init</span><br><span class="line">npm i <span class="comment"># npm install</span></span><br><span class="line">hexo s <span class="comment"># hexo server</span></span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</span><br><span class="line"><span class="built_in">cd</span> themes/next/</span><br></pre></td></tr></table></figure>
<p>Now go to <code>localhost:4000</code>,  your blog should be using the default hexo theme.<br>We downloaded the NexT theme but have not ‘installed it’, so:</p>
<h2 id="open-config-yml-to-change-theme"><a href="#open-config-yml-to-change-theme" class="headerlink" title="open config.yml to change theme"></a>open config.yml to change theme</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;!-- replace default &#34;landscape&#34; w/ &#34;next&#34; --&#62;&#10;themes: next</span><br></pre></td></tr></table></figure>
<p>Now your blog should be in the next theme. <code>hexo s</code> to check</p>
<p><br></p>
<h2 id="Create-a-new-post-page"><a href="#Create-a-new-post-page" class="headerlink" title="Create a new post/ page:"></a>Create a new post/ page:</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo new post <span class="string">'blog post title'</span> <span class="comment">#or hexo 'post title'</span></span><br><span class="line">hexo new page <span class="string">'page title'</span></span><br><span class="line">hexo g <span class="comment"># generate files to /public</span></span><br><span class="line">hexo s <span class="comment"># start server if not already started in another terminal window</span></span><br></pre></td></tr></table></figure>
<p>Edit it under <code>source/_posts</code>, check <a href="https://hexo.io/docs/" target="_blank" rel="external">hexo’s docs</a> for more options</p>
<p><br></p>
<h1 id="Setting-up-domain-and-hosting"><a href="#Setting-up-domain-and-hosting" class="headerlink" title="Setting up domain and hosting"></a>Setting up domain and hosting</h1><p>You must already have bought a domain, meaning the website name ‘leonmak.me’, in my case. If you have a .edu email, I recommend <a href="https://education.github.com/pack/" target="_blank" rel="external">github education pack</a>.</p>
<h2 id="Github-io-pages"><a href="#Github-io-pages" class="headerlink" title="Github.io pages"></a>Github.io pages</h2><p>Go to github.com &amp; create organisation and within it a repo with same name (for eg using ‘leonblogs’ as the org name and repo name I will get “leonblogs/leonblogs.github.io”)<br>add the remote then push to the repo, in repo settings you can see link to leonblogs.github.io</p>
<h2 id="Add-custom-domain"><a href="#Add-custom-domain" class="headerlink" title="Add custom domain"></a>Add custom domain</h2><p>Create a new file in the root folder named ‘CNAME’ with just <code>leonmak.me</code> in it. in Domain provider (eg:Namecheap.com)   Add A records: 192.30.252.153, 192.30.252.154   and CNAME: leonmak.me.</p>
<p>Now in settings it should link to leonmak.me</p>
<h1 id="Updating-with-“hexo-deploy”-plugin"><a href="#Updating-with-“hexo-deploy”-plugin" class="headerlink" title="Updating with “hexo-deploy” plugin"></a>Updating with “hexo-deploy” plugin</h1><p>run <code>npm install hexo-deployer-git --save</code> in _config.yml:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># Deployment&#10;## Docs: http://hexo.io/docs/deployment.html&#10;deploy:&#10;  type: git&#10;  repo: https://github.com/leonblogs/leonblogs.github.io</span><br></pre></td></tr></table></figure>
<h2 id="Add-CNAME-plugin-for-custom-domain"><a href="#Add-CNAME-plugin-for-custom-domain" class="headerlink" title="Add CNAME plugin for custom domain"></a>Add CNAME plugin for custom domain</h2><p><code>npm install hexo-generator-cname --save</code></p>
<p>Add hexo-generator-cname to plugins in _config.yml, and set url</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url: http://leonmak.me&#10;&#60;!-- ... other options --&#62;&#10;plugins:&#10;- hexo-generator-cname</span><br></pre></td></tr></table></figure>
<p>After editing <code>_posts/abc.md</code> files, do a <code>hexo generate</code>, to build the files, then <code>hexo deploy</code>.<br>Done!</p>
<h3 id="Other-plugins"><a href="#Other-plugins" class="headerlink" title="Other plugins:"></a>Other plugins:</h3><ul>
<li><a href="https://github.com/sergiolepore/hexo-tag-emojis" target="_blank" rel="external">hexo emojis</a></li>
<li>Need to install <a href="https://github.com/hexojs/hexo-util" target="_blank" rel="external">hexo-util</a></li>
<li>Follow the instructions on the page, it’s similar to hexo-deploy</li>
</ul>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>



        </div>

        


        

      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.jpeg" alt="Leon Mak" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Leon Mak</p>
        </div>
        <p class="site-description motion-element" itemprop="description"></p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">26</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">categories</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">33</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/rss2.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/leonmak" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Leon Mak</span>
</div>
<!--
<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>
-->


      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    
    

  

    <script type="text/javascript">
      var disqus_shortname = 'leonmak-me';
      var disqus_identifier = 'page/3/index.html';
      var disqus_title = '';
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  


  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  

  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
